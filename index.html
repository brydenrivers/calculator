<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Calculator</title>
</head>
<body>
    <section>
        <h1>Calculator</h1>
        <div class="container">
            <div class="display">
                <input type="text" value="" id="display" disabled= 'disabled'>

            </div>
            <div class="buttons">
                <button class="btn" id="c">c</button>
                <button class="btn operand" id="plusMinus">+/-</button>
                <button class="btn operand" id="percentage">%</button>
                <button class="btn operand" id="divide">/</button>
                <button class="btn" id="7" value="7">7</button>
                <button class="btn" id="8" value="8">8</button>
                <button class="btn" id="9" value="9">9</button>
                <button class="btn operand" id="multiply">X</button>
                <button class="btn" id="4" value="4">4</button>
                <button class="btn" id="5" value="5">5</button>
                <button class="btn" id="6" value="6">6</button>
                <button class="btn operand" id="subtract">-</button>
                <button class="btn" id="1" value="1">1</button>
                <button class="btn" id="2" value="2">2</button>
                <button class="btn" id="3" value="3">3</button>
                <button class="btn operand" id="add">+</button>
                <button class="btn" id="0" value="0">0</button>
                <button class="btn" id="." value=".">.</button>
                <button class="btn operand" id="equal">=</button>

            </div>
        </div>

    </section>

    <script>
        function add(a, b) {
            return a+b;
        }
        function subtract(a, b) {
            return a-b
        }
        function multiply(a, b) {
            return a*b
        }
        function divide(a, b) {
            return a/b
        }
        function operate(a, b, operand) {
            if(operand=='add'){
                return add(a, b)
            }
            else if(operand=='subtract'){
                return subtract(a, b)
            }
            else if(operand=='multiply'){
                return multiply(a, b)
            }
            else if(operand=='divide'){
                return divide(a, b)
            }
        }

        /*CALC*/

        function calc(e) {
            if(e.target.id == 'c'){
                lastKey='';
                operand='';
                num1='';
                displayRes=[0];
                display.value=displayRes.join('');
                console.log(display.value + 'C was pressed and this si the value')



            }
            else if(e.target.id=='equal'||lastKey=='notOperand'){


                if(e.target.id=='equal'){
                    lastKey='';
                    console.log('equals was pressed')
                    num2=display.value;
                    display.value = operate(Number(num1), Number(num2), operand);
                    console.log('read numb1 is '+ num1 )
                    console.log('log 3 operation is ' + num1 + ' ' + operand + ' ' +num2)

                }
                else{
                    console.log('equals was pressed, last key is ' + lastKey)
                    lastKey='operand';

                    num2=display.value;
                    display.value = operate(Number(num1), Number(num2), operand);
                    num1=display.value
                    operand=e.target.id
                    console.log('read numb1 is '+ num1 )
                    console.log('log 4 operation is ' + num1 + ' ' + operand + ' ' +num2)


                }

            }
            else if(e.target.classList.contains('operand')){

                lastKey='operand';
                operand=e.target.id
                num1=display.value;
                console.log('log 1 operand is ' + operand + ' num in memory is ' + num1)
                // display.value=display.value;
            }
            else if(lastKey=="notOperand"){
                // operand=e.target.id
                // this code dos not get executed

                num1=display.value;
                displayRes=[e.target.value]
                display.value=displayRes.join('');
                console.log('log 2 operand is ' + operand + ' num in memory is ' + num1)

            }
            else if(lastKey=="operand"){
                lastKey='notOperand'

                displayRes=[e.target.value]
                display.value=displayRes.join('');

                console.log(lastKey + ' i happened' + ' numb1 is ' + num1)
                return


            }
            else{
                if(displayRes[0]=='0'){
                    displayRes[0]=(e.target.value)
                    display.value=displayRes.join('');
                }
                else{
                    console.log(e.target.value)
                    // display.value+=e.target.value
                    displayRes.push(e.target.value)
                    display.value=displayRes.join('');
                    console.log(display.value + " display value")

                }


            }



        }
        keyDown= document.querySelectorAll('.btn');
        keyDown.forEach(key => key.addEventListener('click', calc));
        const display = document.querySelector('#display')
        displayRes=[];
        lastKey='';
        let operand='';
        let num1;
        let clear=false;
        // Todo: finish all period functions and ussage. Complete percentage functions and usage. Decide if I want to implement the +/- button





    </script>

</body>
</html>